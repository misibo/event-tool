{% extends 'layout.html' %}
{% from 'macros.html' import render_pagination, render_order, render_filter, render_search, render_event_date with context%}

{% block title %}
    Einladungen
{% endblock %}

{% block content %}
<form method="GET">
    <div class="uk-margin" uk-grid>
        <div>
            <h3 class="uk-heading-bullet">
                <a class="uk-link-heading" href="{{ url_for('event.edit', id=event.id) }}">{{ event.name }}</a>
            </h3>
        </div>
        <div class="uk-width-expand@s">
            {{ render_search(args) }}
        </div>
        <div>
            <a href="{{ url_for('event.invite', id=event.id) }}" class="uk-button uk-button-primary">Einladen</a>
        </div>
    </div>
    {% if pagination.items %}
    <input name="page" value="{{ pagination.page }}" hidden>
    <table class="uk-table uk-table-striped">
        <thead>
            <tr>
                <th></th>
                <th>{{ render_order('Vorname', 'first_name', args) }}</th>
                <th>{{ render_order('Nachname', 'family_name', args) }}</th>
                <th>{{ render_filter('Antwort', 'reply', ReplyChoicesf, args) }}</th>
                <th>Aktion</th>
            </tr>
        </thead>
        <tbody>
            {% for invitation in pagination.items %}
            <tr>
                <td>
                    {{ render_user_avatar(invitation.user, resolution=32) }}
                </td>
                <td>{{ invitation.user.first_name }}</td>
                <td>{{ invitation.user.family_name }}</td>
                <td>{{ invitation.get_reply_label() }}</td>
                <td>
                    <ul class="uk-iconnav" uk-margin>
                        <li><a uk-tooltip="Bearbeiten" href="{{ url_for('invitation.edit', id=invitation.id) }}" uk-icon="pencil"></a></li>
                    </ul>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {{ render_pagination(pagination, 'event.invitations', args) }}
    {% else %}
    <div class="uk-text-center uk-margin">
        <h3 class="uk-text-muted">Keine Einladungen gefunden</h3>
    </div>
    {% endif %}
</form>
{% endblock %}
